<div class="contact-list-item" 
     [class]="variant()"
     [class.favorite]="contacto().isFavorite"
     (click)="onContactClick()"
     role="button"
     tabindex="0">
  
  <div class="contact-avatar">
    @if (contacto().image) {
      <img [src]="contacto().image" 
           [alt]="getFullName()" 
           class="avatar-image"
           (error)="contacto().image = ''">
    } @else {
      <div class="avatar-initials">
        {{ getContactInitials() }}
      </div>
    }
    
    @if (contacto().isFavorite) {
      <div class="favorite-badge" title="Contacto favorito">
        <i class="fas fa-star"></i>
      </div>
    }
  </div>

  <div class="contact-info">
    <div class="contact-header">
      <h3 class="contact-name">{{ getFullName() }}</h3>
      
      @if (showIndex()) {
        <span class="contact-index">#{{ index() + 1 }}</span>
      }
    </div>
  </div>

  @if (showActions()) {
    <div class="contact-actions" (click)="$event.stopPropagation()">
      <button class="btn-icon favorite-btn"
              [class.favorited]="contacto().isFavorite"
              [class.loading]="isTogglingFavorite"
              (click)="onToggleFavorite($event)"
              [title]="contacto().isFavorite ? 'Quitar de favoritos' : 'Agregar a favoritos'"
              [disabled]="isTogglingFavorite">
        <i class="fas" 
           [class.fa-star]="contacto().isFavorite" 
           [class.fa-star]="!contacto().isFavorite"
           [class.fa-spinner]="isTogglingFavorite"
           [class.fa-spin]="isTogglingFavorite"></i>
      </button>

      <button class="btn-icon edit-btn"
              (click)="onEditContact($event)"
              title="Editar contacto">
        <i class="fas fa-edit"></i>
      </button>

      <button class="btn-icon delete-btn"
              [class.loading]="isDeleting"
              (click)="showDeleteModal()"
              [title]="isDeleting ? 'Eliminando...' : 'Eliminar contacto'"
              [disabled]="isDeleting">
        <i class="fas" 
           [class.fa-trash]="!isDeleting" 
           [class.fa-spinner]="isDeleting"
           [class.fa-spin]="isDeleting"></i>
      </button>
    </div>
  }
</div>